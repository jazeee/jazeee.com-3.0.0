export interface ISkillDatum {
  type: string;
  experience: Record<number, number>;
  domains: string[];
  scoreWeight?: number;
  skillIsCurrent: boolean;
}

const SKILL_DATA_WITH_GAPS: Record<string, ISkillDatum> = {
  'JavaScript/ES6+': {
    type: 'Language',
    experience: {
      2005: 0,
      2007: 10,
      2008: 15,
      2011: 20,
      2012: 30,
      2013: 60,
      2014: 85,
      2015: 90,
      // 2016: 90,
      // // 2017: 90,
      // 2018: 90,
      2019: 94,
      2020: 95,
      2021: 96,
      2022: 97,
      2023: 97,
      2024: 97,
    },
    domains: ['WebApp', 'Server', 'Software Engineering'],
    scoreWeight: 3,
    skillIsCurrent: true,
  },
  TypeScript: {
    type: 'Language',
    experience: {
      2018: 0,
      2019: 30,
      2020: 50,
      2021: 80,
      2022: 90,
      2023: 90,
      2024: 90,
    },
    domains: ['WebApp', 'Server', 'Software Engineering'],
    scoreWeight: 5,
    skillIsCurrent: true,
  },
  'Meteor.js': {
    type: 'Platform',
    experience: {
      2013: 0,
      2014: 40,
      2015: 70,
      2016: 85,
      2017: 65,
      2018: 70,
      2019: 70,
      2020: 40,
      2021: 30,
    },
    domains: ['WebApp', 'Server', 'Software Engineering'],
    scoreWeight: 1.5,
    skillIsCurrent: true,
  },
  'Node.js': {
    type: 'Platform',
    experience: {
      2011: 0,
      2012: 10,
      2013: 20,
      2014: 40,
      2015: 60,
      2016: 75,
      // 2017: 75,
      2018: 75,
      2019: 85,
      2020: 85,
      2021: 85,
      2022: 85,
      2023: 85,
      2024: 85,
    },
    domains: ['WebApp', 'Server', 'Software Engineering'],
    scoreWeight: 2,
    skillIsCurrent: true,
  },
  React: {
    type: 'Platform',
    experience: {
      2014: 0,
      2015: 10,
      2016: 60,
      2017: 80,
      2018: 85,
      2019: 90,
      2020: 95,
      2021: 100,
      2022: 100,
      2023: 100,
      2024: 100,
    },
    domains: ['WebApp', 'Software Engineering'],
    scoreWeight: 5,
    skillIsCurrent: true,
  },
  'AngularJS 1.5': {
    type: 'Platform',
    experience: {
      2012: 0,
      2013: 60,
      2014: 80,
      2015: 80,
      2016: 90,
      2017: 0,
      2019: 10,
      2020: 20,
      2021: 20,
      2022: 20,
      2023: 0,
      2024: 0,
    },
    domains: ['WebApp', 'Software Engineering'],
    skillIsCurrent: false,
  },
  'AngularJS N.0': {
    type: 'Platform',
    experience: {
      2014: 0,
      2015: 10,
      2016: 20,
      2017: 20,
      2018: 10,
      2019: 0,
    },
    domains: ['WebApp', 'Software Engineering'],
    skillIsCurrent: false,
  },
  Bootstrap: {
    type: 'Platform',
    experience: {
      2012: 0,
      2013: 55,
      2014: 80,
      2015: 85,
      2016: 90,
      2017: 90,
      2018: 60,
      2019: 30,
      2020: 20,
      2021: 20,
      2022: 20,
      2023: 20,
    },
    domains: ['WebApp', 'Software Engineering'],
    skillIsCurrent: false,
  },
  'Material-UI': {
    type: 'Platform',
    experience: {
      2016: 0,
      2017: 20,
      2018: 70,
      2019: 80,
      2020: 85,
      2021: 88,
      2022: 90,
      2023: 90,
      2024: 90,
    },
    domains: ['WebApp', 'Software Engineering'],
    scoreWeight: 5,
    skillIsCurrent: true,
  },
  'D3.js': {
    type: 'Platform',
    experience: {
      2012: 0,
      2013: 60,
      2014: 75,
      2015: 80,
      2016: 80,
      2017: 70,
      2018: 60,
      2019: 60,
      2020: 40,
      2021: 35,
    },
    domains: ['WebApp', 'Software Engineering'],
    scoreWeight: 2,
    skillIsCurrent: true,
  },
  JQuery: {
    type: 'Platform',
    experience: {
      2010: 0,
      2011: 20,
      2012: 30,
      2013: 40,
      2014: 50,
      2015: 70,
      2016: 70,
      2017: 40,
      2018: 20,
      2023: 20,
    },
    domains: ['WebApp'],
    skillIsCurrent: false,
  },
  'HTML/CSS/SASS': {
    type: 'Language',
    experience: {
      2005: 0,
      2006: 10,
      2008: 20,
      2010: 20,
      2012: 30,
      2013: 50,
      2014: 75,
      2015: 85,
      2016: 90,
      2017: 90,
      2018: 90,
      2019: 90,
      2020: 90,
      2021: 90,
      2022: 90,
      2023: 90,
      2024: 90,
    },
    domains: ['WebApp', 'Software Engineering'],
    scoreWeight: 2,
    skillIsCurrent: true,
  },
  Java: {
    type: 'Language',
    experience: {
      2007: 0,
      2008: 10,
      2009: 30,
      2010: 60,
      2011: 75,
      2012: 85,
      2013: 90,
      2014: 85,
      2015: 85,
      2016: 85,
      2017: 75,
      2018: 70,
      2019: 70,
      2020: 50,
      2021: 40,
      2022: 35,
      2023: 30,
    },
    domains: ['WebApp', 'Server', 'Android', 'Software Engineering'],
    scoreWeight: 1,
    skillIsCurrent: true,
  },
  'Jade/Pug': {
    type: 'Language',
    experience: {
      2012: 0,
      2013: 60,
      2014: 95,
      2015: 100,
      2016: 100,
      2018: 20,
      2021: 10,
      2022: 40,
      2023: 50,
      2024: 50,
    },
    domains: ['WebApp', 'Software Engineering'],
    scoreWeight: 1,
    skillIsCurrent: true,
  },
  CoffeeScript: {
    type: 'Language',
    experience: {
      2012: 0,
      2013: 60,
      2014: 85,
      2015: 95,
      2016: 80,
      2017: 60,
      2018: 0,
    },
    domains: ['WebApp', 'Server', 'Software Engineering'],
    scoreWeight: 1,
    skillIsCurrent: false,
  },
  'ReST/WebSockets': {
    type: 'Platform',
    experience: {
      2006: 0,
      2007: 40,
      2008: 50,
      2009: 70,
      2010: 75,
      2011: 75,
      2012: 75,
      2013: 80,
      2014: 90,
      2015: 90,
      2016: 90,
      2017: 90,
      2018: 90,
      2019: 90,
      2020: 90,
      2021: 90,
      2022: 90,
      2023: 90,
      2024: 90,
    },
    domains: ['WebApp', 'Server', 'Software Engineering'],
    scoreWeight: 1,
    skillIsCurrent: true,
  },
  Spring: {
    type: 'Platform',
    experience: {
      2009: 0,
      2010: 30,
      2011: 40,
      2012: 40,
      2013: 50,
      2014: 50,
      2015: 60,
      2016: 60,
      2017: 0,
    },
    domains: ['Server', 'Software Engineering'],
    skillIsCurrent: false,
  },
  Python: {
    type: 'Language',
    experience: {
      2010: 0,
      2012: 15,
      2013: 25,
      2014: 40,
      2015: 50,
      2016: 50,
      2017: 60,
      2018: 60,
      2019: 65,
      2020: 65,
      2021: 65,
      2022: 65,
      2023: 65,
      2024: 65,
    },
    domains: ['Server', 'Software Engineering'],
    skillIsCurrent: true,
  },
  'c++': {
    type: 'Language',
    experience: {
      1995: 0,
      1996: 10,
      1998: 20,
      2000: 30,
      2001: 40,
      2002: 50,
      2004: 70,
      2005: 70,
      2006: 85,
      2010: 85,
      2012: 80,
      2014: 75,
      2015: 70,
      2016: 60,
      2017: 50,
      2018: 50,
      2019: 50,
      2020: 40,
      2021: 30,
    },
    domains: ['Server', 'Software Engineering'],
    skillIsCurrent: false,
  },
  STL: {
    type: 'Platform',
    experience: {
      2002: 0,
      2003: 20,
      2004: 50,
      2005: 60,
      2006: 70,
      2008: 70,
      2010: 60,
      2012: 50,
      2014: 40,
      2015: 40,
      2016: 30,
      2017: 30,
      2018: 30,
    },
    domains: ['Server', 'Software Engineering'],
    skillIsCurrent: false,
  },
  'VC++': {
    type: 'Language',
    experience: {
      1995: 0,
      1996: 10,
      1998: 20,
      2000: 30,
      2001: 40,
      2002: 50,
      2004: 70,
      2005: 70,
      2006: 70,
      2008: 70,
      2010: 50,
      2011: 30,
      2013: 0,
    },
    domains: ['Windows'],
    skillIsCurrent: false,
  },
  Mongo: {
    type: 'Database',
    experience: {
      2012: 0,
      2013: 10,
      2014: 20,
      2015: 45,
      2016: 60,
      2017: 60,
      2018: 60,
      2019: 60,
    },
    domains: ['Server', 'Software Engineering'],
    skillIsCurrent: true,
  },
  Postgresql: {
    type: 'Database',
    experience: {
      2010: 0,
      2011: 10,
      2013: 40,
      2014: 60,
      2015: 70,
      2016: 85,
      2017: 65,
      2018: 45,
      2019: 45,
      2020: 60,
      2021: 65,
      2022: 75,
      2023: 75,
      2024: 65,
    },
    domains: ['Server', 'Software Engineering'],
    skillIsCurrent: true,
  },
  MySQL: {
    type: 'Database',
    experience: {
      2006: 0,
      2008: 10,
      2009: 30,
      2010: 60,
      2011: 50,
      2013: 50,
      2014: 50,
      2015: 50,
      2016: 40,
      2017: 60,
      2018: 80,
      2019: 80,
      2020: 60,
      2021: 40,
      2022: 40,
    },
    domains: ['Server', 'Software Engineering'],
    skillIsCurrent: true,
  },
  Linux: {
    type: 'Environment',
    experience: {
      1999: 0,
      2000: 10,
      2001: 20,
      2002: 50,
      2004: 70,
      2005: 75,
      2006: 85,
      2008: 85,
      2010: 85,
      2012: 90,
      2014: 90,
      2015: 90,
      2016: 90,
      2017: 90,
      2018: 90,
      2019: 90,
      2020: 90,
      2021: 90,
      2022: 90,
      2023: 90,
      2024: 90,
    },
    domains: ['Server', 'Linux', 'Software Engineering'],
    scoreWeight: 2,
    skillIsCurrent: true,
  },
  Windows: {
    type: 'Environment',
    experience: {
      1992: 0,
      1995: 20,
      1997: 40,
      1998: 60,
      2000: 70,
      2001: 70,
      2002: 70,
      2004: 70,
      2005: 70,
      2006: 70,
      2008: 70,
      2010: 70,
      2012: 60,
      2014: 50,
      2015: 45,
      2016: 45,
      2017: 30,
      2018: 30,
      2019: 30,
      2020: 30,
      2021: 30,
    },
    domains: ['Windows'],
    skillIsCurrent: false,
  },
  git: {
    type: 'Source Control',
    experience: {
      2011: 0,
      2012: 10,
      2013: 20,
      2014: 30,
      2015: 60,
      2016: 80,
      2017: 80,
      2018: 80,
      2019: 90,
      2020: 90,
      2021: 90,
      2022: 90,
      2023: 90,
      2024: 90,
    },
    domains: ['Process', 'Software Engineering'],
    scoreWeight: 3.0,
    skillIsCurrent: true,
  },
  'subversion (svn)': {
    type: 'Source Control',
    experience: {
      2006: 0,
      2007: 10,
      2008: 30,
      2009: 50,
      2010: 60,
      2011: 70,
      2013: 75,
      2014: 75,
      2015: 80,
      2016: 70,
      2017: 0,
    },
    domains: ['Process'],
    skillIsCurrent: false,
  },
  cvs: {
    type: 'Source Control',
    experience: {
      2003: 0,
      2004: 10,
      2005: 20,
      2006: 30,
      2007: 30,
      2008: 0,
    },
    domains: ['Process'],
    skillIsCurrent: false,
  },
  'Visual Source Safe': {
    type: 'Source Control',
    experience: {
      1997: 0,
      1998: 10,
      2000: 30,
      2002: 40,
      2004: 50,
      2005: 45,
      2006: 40,
      2007: 20,
      2008: 0,
    },
    domains: ['Process'],
    skillIsCurrent: false,
  },
  'Tech Lead': {
    type: 'Project Management',
    experience: {
      2002: 0,
      2003: 15,
      2004: 25,
      2005: 30,
      2006: 35,
      2007: 40,
      2008: 50,
      2009: 65,
      2010: 75,
      2011: 85,
      2012: 90,
      2013: 95,
      2014: 95,
      2015: 95,
      2016: 95,
      2017: 95,
      2018: 95,
      2019: 90,
      2020: 90,
      2021: 95,
      2022: 100,
      2023: 100,
    },
    domains: ['Process'],
    skillIsCurrent: true,
  },
  'Atlassian, GitHub, Linear, Phabricator, Arcanist': {
    type: 'Project Management',
    experience: {
      2007: 0,
      2008: 10,
      2009: 30,
      2010: 60,
      2011: 70,
      2012: 75,
      2013: 85,
      2014: 85,
      2015: 85,
      2016: 90,
      2017: 90,
      2018: 90,
      2019: 90,
      2020: 90,
      2021: 90,
      2022: 90,
      2023: 90,
      2024: 90,
    },
    domains: ['Process'],
    skillIsCurrent: true,
  },
  'Agile/Kanban': {
    type: 'Project Management',
    experience: {
      2008: 0,
      2009: 10,
      2010: 35,
      2011: 60,
      2012: 75,
      2013: 85,
      2014: 90,
      2015: 90,
      2016: 90,
      2017: 90,
      2018: 90,
      2019: 80,
      2020: 70,
      2021: 65,
    },
    domains: ['Process'],
    skillIsCurrent: true,
  },
};

export const SKILL_DATA: Record<string, ISkillDatum> = {};
/**
 * Fill in missing year gaps
 */
Object.keys(SKILL_DATA_WITH_GAPS).forEach((name) => {
  const skillDatum = SKILL_DATA_WITH_GAPS[name];
  const { experience } = skillDatum;
  // Fill in missing holes in data
  const years = Object.keys(experience).map(Number);
  const minYear = Math.min(...years);
  const maxYear = Math.max(...years);
  let lastFoundYearIndex = 0;
  for (let year = minYear + 1; year < maxYear; year += 1) {
    if (experience[year] == null) {
      const lastFoundYear = years[lastFoundYearIndex];
      const nextFoundYear = years[lastFoundYearIndex + 1];
      const deltaYears = nextFoundYear - lastFoundYear || 1;
      const slope = (experience[nextFoundYear] - experience[lastFoundYear]) / deltaYears;
      const nextValue = Math.max(
        0,
        Math.min(100, experience[lastFoundYear] + slope * (year - lastFoundYear))
      );
      experience[year] = nextValue;
      // console.log(
      //   name,
      //   lastFoundYear,
      //   year,
      //   nextFoundYear,
      //   slope,
      //   nextValue,
      //   experience[nextFoundYear] - experience[lastFoundYear]
      // );
    } else {
      lastFoundYearIndex += 1;
    }
  }
  SKILL_DATA[name] = {
    ...skillDatum,
    experience,
  };
});
